System.register("chunks:///_virtual/index.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,r,o,a,l,u,s,h,f,c,p,b,d,m,g,C,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Prefab,u=e.instantiate,s=e.Sprite,h=e.Vec3,f=e.AudioSource,c=e.assert,p=e.UIOpacity,b=e.Graphics,d=e.Color,m=e.Label,g=e.UITransform,C=e.Input,v=e.Component}],execute:function(){var y,_,B,w,P,N,z,k,x,F,E,O,S,T,A,j,R,G,L,M,U,I,q,D,H,V,J,W,K,Z,Q,X,Y,$,ee,te,ie,ne,re,oe,ae,le,ue,se,he,fe,ce,pe,be,de,me,ge,Ce,ve,ye,_e,Be,we,Pe;o._RF.push({},"1d718xPf9ZAP5jK0rCEvTqf","index",void 0);var Ne=a.ccclass,ze=a.property,ke=null,xe=null,Fe=null,Ee=["Rayquaza_8bits","Blaziken_8bits","Flareon_8bits","Torchic_8bits","HoOh_8bits","Snorlax_8bits","Vaporeon_8bits","Flygon_8bits","Umbreon_8bits","Mudkip_8bits","Squirtle_8bits","Altaria_8bits","Eevee_8bits","Charizard_8bits","Charmander_8bits","Jolteon_8bits","Lugia_8bits","Espeon_8bits","Pikachu_8bits","Bulbasaur_8bits"],Oe=[],Se=!1,Te=[],Ae=null,je=null,Re=null,Ge=null,Le=null,Me=5,Ue=null,Ie=null,qe=5,De=null,He=null,Ve=0,Je=0,We=null,Ke=null,Ze=!1,Qe=null,Xe=null,Ye=null,$e=null,et=null,tt=null,it=null;e("index",(y=Ne("index"),_=ze(l),B=ze(l),w=ze(l),P=ze(l),N=ze(l),z=ze(l),k=ze(l),x=ze(l),F=ze(l),E=ze(l),O=ze(l),S=ze(l),T=ze(l),A=ze(l),j=ze(l),R=ze(l),G=ze(l),L=ze(l),M=ze(l),U=ze(l),I=ze(l),q=ze(l),D=ze(l),H=ze(l),V=ze(l),J=ze(l),W=ze(l),K=ze(l),y((X=t((Q=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(r(t),"backGroundPrefab",X,r(t)),n(r(t),"startBtnPrefab",Y,r(t)),n(r(t),"reflashBtnPrefab",$,r(t)),n(r(t),"hintBtnPrefab",ee,r(t)),n(r(t),"pokemonBoxPrefab",te,r(t)),n(r(t),"pokemonBoxClickPrefab",ie,r(t)),n(r(t),"hintBoxPrefab",ne,r(t)),n(r(t),"dialogPrefab",re,r(t)),n(r(t),"Rayquaza_8bits",oe,r(t)),n(r(t),"Blaziken_8bits",ae,r(t)),n(r(t),"Flareon_8bits",le,r(t)),n(r(t),"Torchic_8bits",ue,r(t)),n(r(t),"HoOh_8bits",se,r(t)),n(r(t),"Snorlax_8bits",he,r(t)),n(r(t),"Vaporeon_8bits",fe,r(t)),n(r(t),"Flygon_8bits",ce,r(t)),n(r(t),"Umbreon_8bits",pe,r(t)),n(r(t),"Mudkip_8bits",be,r(t)),n(r(t),"Squirtle_8bits",de,r(t)),n(r(t),"Altaria_8bits",me,r(t)),n(r(t),"Eevee_8bits",ge,r(t)),n(r(t),"Charizard_8bits",Ce,r(t)),n(r(t),"Charmander_8bits",ve,r(t)),n(r(t),"Jolteon_8bits",ye,r(t)),n(r(t),"Lugia_8bits",_e,r(t)),n(r(t),"Espeon_8bits",Be,r(t)),n(r(t),"Pikachu_8bits",we,r(t)),n(r(t),"Bulbasaur_8bits",Pe,r(t)),t}i(t,e);var o=t.prototype;return o.start=function(){["gameCanvas"].indexOf(this.node.name)>=0&&(xe=this.node,Ae=u(this.pokemonBoxPrefab).getComponent(s).spriteFrame,je=u(this.pokemonBoxClickPrefab).getComponent(s).spriteFrame,Re=u(this.hintBoxPrefab).getComponent(s).spriteFrame,(Le=xe.getChildByName("hintLab")).active=!1,(Ge=xe.getChildByName("hintBtn")).active=!1,(Ie=xe.getChildByName("reflashLab")).active=!1,(Ue=xe.getChildByName("reflashBtn")).active=!1,(He=xe.getChildByName("scoreLab")).active=!1,(De=xe.getChildByName("scoreBtn")).active=!1),["indexCanvas"].indexOf(this.node.name)>=0&&(ke=this.node,this.node.addChild(u(this.backGroundPrefab)),(Fe=this.node.getChildByName("bg1")).setSiblingIndex(0),Fe.setPosition(new h(Fe.position.x,Fe.position.y,0)),Qe=ke.getChildByName("bgSE").getComponent(f),c(Qe),Xe=ke.getChildByName("clickSE").getComponent(f),c(Xe),Ye=ke.getChildByName("hintSE").getComponent(f),c(Ye),$e=ke.getChildByName("winSE").getComponent(f),c($e),et=ke.getChildByName("linkSE").getComponent(f),c(et),tt=ke.getChildByName("linkFailSE").getComponent(f),c(tt),it=ke.getChildByName("reflashSE").getComponent(f),c(it))},o.startClick=function(){var e=this,t=this;Xe.play(),Qe.play(),this.node.active=!1,this.fadeOut(Fe.getComponent(p)),xe.getComponent(p).opacity=0;var i=xe.getChildByName("Graphics").getComponent(b);i.strokeColor.set(d.RED),i.lineWidth=5;for(var n=1,r=1,o=function(o){e.newRandomArray(19).forEach((function(e,a){var l=u(t.pokemonBoxPrefab);xe.addChild(l),l.setPosition(new h(45*n-390,45*r-150,0)),l.getComponent(g).width=30,l.getComponent(g).height=30,l.name=Ee[e]+"|"+n+"|"+r,Oe[n+"|"+r]=Ee[e]+"|"+(a+20*(o-1)),16==n?(n=1,r+=1):n+=1,l.on(C.EventType.MOUSE_UP,(function(e){if(Ze)return!1;var n=e.target.name.split("|");if(Se){if(console.log("連線中..."),n[0]!=Te[0]||Te.join("|")==e.target.name){tt.play();var r=xe.getChildByName(Te.join("|"));r.getComponent(s).spriteFrame=Ae;var o=r.getComponent(g);o.width=40,o.height=40}else if(t.remove(Number(Te[1]),Number(Te[2]),Number(n[1]),Number(n[2]))){console.log("連線成功("+Je+")"),Ze=!0,Je++,et.play();var a=xe.getChildByName(Te.join("|")).getPosition();if(i.moveTo(a.x,a.y),null!=Ke){var l=Ke.split("&"),f=45*l[0]-390,c=45*l[1]-150;i.lineTo(f,c)}if(null!=We){var p=We.split("&"),b=45*p[0]-390,d=45*p[1]-150;i.lineTo(b,d)}var C=xe.getChildByName(e.target.name).getPosition();i.lineTo(C.x,C.y),i.stroke(),t.scheduleOnce((function(){i.clear(),We=null,Ke=null,xe.getChildByName(Te.join("|")).destroy(),xe.getChildByName(e.target.name).destroy(),He.getComponent(m).string=Ve,Oe[Number(Te[1])+"|"+Number(Te[2])]="undefined",Oe[Number(n[1])+"|"+Number(n[2])]="undefined",Ze=!1}),.5)}else{tt.play();var v=xe.getChildByName(Te.join("|"));v.getComponent(s).spriteFrame=Ae;var y=v.getComponent(g);y.width=40,y.height=40}Se=!1}else{Te=n,e.target.getComponent(s).spriteFrame=je;var _=e.target.getComponent(g);_.width=40,_.height=40,Se=!0}if(40==Je){$e.play(),Qe.volume=.3;var B=u(t.dialogPrefab);xe.addChild(B);var w=u(He);return B.addChild(w),w.getComponent(m).string="恭喜收服所有神奇寶貝！",w.setPosition(new h(70,0,0)),t.scheduleOnce((function(){B.destroy(),Je=0,t.nextGame(t)}),2),t.scheduleOnce((function(){Qe.volume=1}),10),!1}}));var f=u(t[Ee[e]]);l.addChild(f),f.getComponent(g).width="Torchic_8bits"==Ee[e]?25:43,f.getComponent(g).height=43}))},a=1;a<=4;a++)o(a);this.scheduleOnce((function(){this.fadeIn(xe.getComponent(p))}),1),De.active=!0,He.active=!0,He.getComponent(m).string=Ve,Ge.active=!0,Le.active=!0,Ge.getComponent(s).spriteFrame=u(this.hintBtnPrefab).getComponent(s).spriteFrame,Ue.active=!0,Ie.active=!0,Ue.getComponent(s).spriteFrame=u(this.reflashBtnPrefab).getComponent(s).spriteFrame},o.fadeOut=function(e){e.opacity>=85&&(e.opacity-=2,this.scheduleOnce((function(){this.fadeOut(e)}),.005))},o.fadeIn=function(e){e.opacity<255&&(e.opacity+=4,this.scheduleOnce((function(){this.fadeIn(e)}),.005))},o.newRandomArray=function(e){for(var t=Array.apply(null,Array(e+1)).map((function(e,t){return t})),i=[],n=0;n<=e;n++){var r=Math.floor(Math.random()*t.length);i[n]=t[r],t.splice(r,1)}return i},o.hint=function(){var e=this;if(Xe.play(),Me<=0){var t=u(e.dialogPrefab);xe.addChild(t);var i=u(Le);return t.addChild(i),i.getComponent(m).string="提示次數已用完！",i.setPosition(new h(60,0,0)),this.scheduleOnce((function(){t.destroy()}),2),!1}Me-=1,Le.getComponent(m).string=Me;for(var n=!1,r=1;r<=5;r++)for(var o=1;o<=16;o++){var a=Oe[o+"|"+r].split("|"),l=1;if("undefined"!=a[0])for(var f=1;f<=5;f++)for(var c=1;c<=16;c++){var p=Oe[c+"|"+f].split("|");if("undefined"!=p[0]&&a[0]==p[0]&&a[1]!=p[1]&&(l++,e.remove(o,r,c,f))){Ye.play();var b=xe.getChildByName(a[0]+"|"+o+"|"+r);b.getComponent(s).spriteFrame=Re;var d=b.getComponent(g);d.width=40,d.height=40;var C=xe.getChildByName(p[0]+"|"+c+"|"+f);C.getComponent(s).spriteFrame=Re;var v=C.getComponent(g);v.width=40,v.height=40,n=!0,o=999,r=999,c=999,f=999}l>=4&&(c=999,f=999)}}if(!n){Me+=1,Le.getComponent(m).string=Me;var y=u(e.dialogPrefab);xe.addChild(y);var _=u(Le);y.addChild(_),_.getComponent(m).string="無法連線！",_.setPosition(new h(40,0,0)),this.scheduleOnce((function(){y.destroy()}),2)}},o.reflash=function(){if(Xe.play(),it.play(),qe<=0){var e=u(this.dialogPrefab);xe.addChild(e);var t=u(Ie);return e.addChild(t),t.getComponent(m).string="刷新次數已用完！",t.setPosition(new h(60,0,0)),this.scheduleOnce((function(){e.destroy()}),2),!1}qe-=1,Ie.getComponent(m).string=qe;for(var i=0,n=1;n<=5;n++)for(var r=1;r<=16;r++){"undefined"!=Oe[r+"|"+n].split("|")[0]&&i++}var o=0;i%4!=0&&(o=-1);for(var a=[],l=1;l<=4;l++){this.newRandomArray(Math.ceil(i/4)-1+(l>2?o:0)).forEach((function(e,t){a.push(Ee[e])}))}for(var s=0,f=1;f<=5;f++)for(var c=1;c<=16;c++){var p=Oe[c+"|"+f].split("|");if("undefined"!=p[0]){var b=xe.getChildByName(p[0]+"|"+c+"|"+f);b.name=a[s]+"|"+c+"|"+f,b.removeAllChildren();var d=u(this[a[s]]);b.addChild(d),d.getComponent(g).width="Torchic_8bits"==a[s]?25:43,d.getComponent(g).height=43,Oe[c+"|"+f]=a[s]+"|"+s,s++}}},o.nextGame=function(e){var t=xe.getChildByName("Graphics").getComponent(b);t.strokeColor.set(d.RED),t.lineWidth=5,qe+=1,Ie.getComponent(m).string=qe;for(var i=[],n=1;n<=4;n++){this.newRandomArray(19).forEach((function(e,t){i.push(Ee[e])}))}for(var r=0,o=1;o<=5;o++)for(var a=1;a<=16;a++){var l=Oe[a+"|"+o].split("|");null!=xe.getChildByName(l[0]+"|"+a+"|"+o)&&xe.getChildByName(l[0]+"|"+a+"|"+o).destroy();var f=u(e.pokemonBoxPrefab);xe.addChild(f),f.setPosition(new h(45*a-390,45*o-150,0)),f.getComponent(g).width=30,f.getComponent(g).height=30,f.name=i[r]+"|"+a+"|"+o,Oe[a+"|"+o]=i[r]+"|"+r,f.on(C.EventType.MOUSE_UP,(function(i){if(Ze)return!1;var n=i.target.name.split("|");if(Se){if(console.log("連線中..."),n[0]!=Te[0]||Te.join("|")==i.target.name){tt.play();var r=xe.getChildByName(Te.join("|"));r.getComponent(s).spriteFrame=Ae;var o=r.getComponent(g);o.width=40,o.height=40}else if(e.remove(Number(Te[1]),Number(Te[2]),Number(n[1]),Number(n[2]))){console.log("連線成功("+Je+")"),Ze=!0,Je++,et.play();var a=xe.getChildByName(Te.join("|")).getPosition();if(t.moveTo(a.x,a.y),null!=Ke){var l=Ke.split("&"),f=45*l[0]-390,c=45*l[1]-150;t.lineTo(f,c)}if(null!=We){var p=We.split("&"),b=45*p[0]-390,d=45*p[1]-150;t.lineTo(b,d)}var C=xe.getChildByName(i.target.name).getPosition();t.lineTo(C.x,C.y),t.stroke(),e.scheduleOnce((function(){t.clear(),We=null,Ke=null,xe.getChildByName(Te.join("|")).destroy(),xe.getChildByName(i.target.name).destroy(),He.getComponent(m).string=Ve,Oe[Number(Te[1])+"|"+Number(Te[2])]="undefined",Oe[Number(n[1])+"|"+Number(n[2])]="undefined",Ze=!1}),.5)}else{tt.play();var v=xe.getChildByName(Te.join("|"));v.getComponent(s).spriteFrame=Ae;var y=v.getComponent(g);y.width=40,y.height=40}Se=!1}else{Te=n,i.target.getComponent(s).spriteFrame=je;var _=i.target.getComponent(g);_.width=40,_.height=40,Se=!0}if(40==Je){$e.play(),Qe.volume=.3;var B=u(e.dialogPrefab);xe.addChild(B);var w=u(He);return B.addChild(w),w.getComponent(m).string="恭喜收服所有神奇寶貝！",w.setPosition(new h(70,0,0)),e.scheduleOnce((function(){B.destroy(),Je=0,e.nextGame(e)}),2),e.scheduleOnce((function(){Qe.volume=1}),10),!1}}));var c=u(e[i[r]]);f.addChild(c),c.getComponent(g).width="Torchic_8bits"==i[r]?25:43,c.getComponent(g).height=43,r++}},o.isBlocked=function(e,t,i,n){return(e!=i||t!=n)&&(0!=e&&17!=e&&0!=t&&6!=t&&"undefined"!=Oe[e+"|"+t])},o.horizon=function(e,t,i,n){if(t!=n)return!1;if(e>i){for(var r=e-1;r>=i;r--)if(this.isBlocked(r,t,i,n))return!1}else for(var o=e+1;o<=i;o++)if(this.isBlocked(o,t,i,n))return!1;return!0},o.vertical=function(e,t,i,n){if(e!=i)return!1;if(t>n){for(var r=t-1;r>=n;r--)if(this.isBlocked(e,r,i,n))return!1}else for(var o=t+1;o<=n;o++)if(this.isBlocked(e,o,i,n))return!1;return!0},o.turn_once=function(e,t,i,n){var r=e,o=n,a=i,l=t;if(!this.isBlocked(r,o,e,t)){if(this.vertical(e,t,r,o)&&this.horizon(r,o,i,n))return We=r+"&"+o,!0;if(this.horizon(e,t,r,o)&&this.vertical(r,o,i,n))return We=r+"&"+o,!0}if(!this.isBlocked(a,l,e,t)){if(this.vertical(i,n,a,l)&&this.horizon(a,l,e,t))return We=a+"&"+l,!0;if(this.horizon(i,n,a,l)&&this.vertical(a,l,e,t))return We=a+"&"+l,!0}return!1},o.turn_twice=function(e,t,i,n){var r;r=this.get4Path(e,t);for(var o=0;o<r.length;o++)if(this.turn_once(r[o][0],r[o][1],i,n))return Ke=r[o][0]+"&"+r[o][1],!0},o.get4Path=function(e,t){for(var i=[],n=t+1;n<=6;n++)6==n?i.push([e,n]):"undefined"!=Oe[e+"|"+n]?n=7:i.push([e,n]);for(var r=t-1;r>=0;r--)0==r?i.push([e,r]):"undefined"!=Oe[e+"|"+r]?r=-1:i.push([e,r]);for(var o=e-1;o>=0;o--)0==o?i.push([o,t]):"undefined"!=Oe[o+"|"+t]?o=-1:i.push([o,t]);for(var a=e+1;a<=17;a++)17==a?i.push([a,t]):"undefined"!=Oe[a+"|"+t]?a=18:i.push([a,t]);return i},o.remove=function(e,t,i,n){return 1==this.horizon(e,t,i,n)||1==this.vertical(e,t,i,n)?(Ve+=1,!0):1==this.turn_once(e,t,i,n)?(Ve+=2,!0):1==this.turn_twice(e,t,i,n)&&(Ve+=3,!0)},t}(v)).prototype,"backGroundPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(Q.prototype,"startBtnPrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(Q.prototype,"reflashBtnPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(Q.prototype,"hintBtnPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(Q.prototype,"pokemonBoxPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(Q.prototype,"pokemonBoxClickPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(Q.prototype,"hintBoxPrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(Q.prototype,"dialogPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(Q.prototype,"Rayquaza_8bits",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(Q.prototype,"Blaziken_8bits",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(Q.prototype,"Flareon_8bits",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(Q.prototype,"Torchic_8bits",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(Q.prototype,"HoOh_8bits",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(Q.prototype,"Snorlax_8bits",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(Q.prototype,"Vaporeon_8bits",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(Q.prototype,"Flygon_8bits",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(Q.prototype,"Umbreon_8bits",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(Q.prototype,"Mudkip_8bits",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(Q.prototype,"Squirtle_8bits",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(Q.prototype,"Altaria_8bits",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(Q.prototype,"Eevee_8bits",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(Q.prototype,"Charizard_8bits",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(Q.prototype,"Charmander_8bits",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(Q.prototype,"Jolteon_8bits",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=t(Q.prototype,"Lugia_8bits",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=t(Q.prototype,"Espeon_8bits",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=t(Q.prototype,"Pikachu_8bits",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=t(Q.prototype,"Bulbasaur_8bits",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=Q))||Z));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./index.ts"],(function(){"use strict";return{setters:[null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});